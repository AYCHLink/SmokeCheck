#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

$domains = (new \Brunty\Cigar\Parser)->parse('.cigar');
$results = (new \Brunty\Cigar\Checker)->check($domains);

array_shift($argv);
$quiet = isset($argv[0]) && $argv[0] === '--quiet';

$passed = (new \Brunty\Cigar\Outputter)->output($results, $quiet);

if ( ! $passed) {
    exit(1);
}

exit(0);
